# 文件类  

打包压缩  

``` bash
tar -cjvf tmplog.tar.bz2 /tmp/log
tar -cjvf datalog.tar.bz2 /data/log
tar -cjvf MapFileslog.tar.bz2 /data/MapFiles
tar -cjvf log.tar.bz2 *.tar.bz2
rm tmplog.tar.bz2 datalog.tar.bz2 MapFileslog.tar.bz2  log.tar.bz2
```

仅打包，不压缩

``` bash
tar -cvf test.tar test
```

打包成tar.gz的格式

``` bash
tar -czvf archive.tar.gz file1 file2 directory
```

解包解压：

- tar -xjvf log.tar.bz2  
- tar -xzvf log.tar.gz

``` bash
tar [选项] [-f 归档文件名] [要打包/解压的文件/目录]
```

`tar` 命令的这些选项/操作均源自英文单词的缩写（部分为传统约定俗成的简写），以下是逐一拆解：  

核心操作(最基础的动作类)

| 选项   | 英文全称           | 中文释义  | 补充说明               |
| ---- | -------------- | ----- | ------------------ |
| `-c` | **c**reate     | 创建    | 核心操作，用于新建归档文件      |
| `-x` | e**x**tract    | 提取/解压 | 从归档文件中释放内容         |
| `-t` | lis**t**（传统简写） | 列出/查看 | 早期Unix工具常将list简写为t |

压缩/解压算法类

| 选项   | 英文全称              | 中文释义         | 补充说明                                  |
| ---- | ----------------- | ------------ | ------------------------------------- |
| `-z` | **z**ip（代指gzip）   | 使用gzip压缩/解压  | gzip是GNU zip的缩写，z为zip首字母              |
| `-j` | bz**j**2（代指bzip2） | 使用bzip2压缩/解压 | bzip2无直接首字母缩写，j是约定俗成的简写（早期bzip工具曾用-j） |
| `-J` | **J**xz（代指xz）     | 使用xz压缩/解压    | xz工具的官方约定，大写J区分小写j（bzip2）             |

通用功能类  

| 选项 | 英文全称                | 中文释义                 | 补充说明                     |
|------|-------------------------|--------------------------|------------------------------|
| `-v` | **v**erbose             | 详细的/冗余的            | 显示操作的详细过程（文件列表、进度等） |
| `-f` | **f**ile                | 文件                     | 必须指定归档文件路径，`-f` 后紧跟文件名（如 `-f test.tar.gz`） |

> `-f` 后紧跟文件名

补充说明

1. `tar` 本身是 **t**ape **ar**chive（磁带归档）的缩写，早期用于磁带备份，因此选项设计偏向简洁（单字母）；
2. 压缩类选项（`-z/-j/-J`）是“归档+压缩”的组合：`tar -czf` = 创建+gzip压缩+指定文件，`tar -xjf` = 解压+bzip2解压+指定文件；
3. `-f` 是唯一必须跟参数的选项，且惯例放在所有选项最后（如 `tar -czvf test.tar.gz dir/`，而非 `tar -f test.tar.gz -czv dir/`）。

举例说明

打包

``` shell
tar -cjvf tmplog.tar.bz2 /tmp/log # 打包/tmp/log到当前文件夹，名字为tmplog.tar.bz2。注意：打包只会打包log文件夹下的内容，tmp下其他文件夹不会打包
tar -cjvf ~/tmplog.tar.bz2 /tmp/log # 打包/tmp/log到用户目录下，名字为tmplog.tar.bz2
```

解压缩

``` shell
tar -xzvf log.tar.gz       # 解压log.tar.gz到当前目录
tar -xzvf log.tar.gz -C ~/ # 解压log.tar.gz到用户目录
```

# VI

## 插入

- `i`：在光标所在位置开始插入文本。  
- `a`：在光标后一个字符的位置开始插入文本。

## 搜索

``` bash
/string
```

/命令从光标处开始向后寻找字符串 string。

``` bash
?string
```

? 命令从光标处开始向前寻找字符串 string。  
n 命令重复上一条检索命令。  
N 命令重复上一条检索命令，但检索方向改变。例如上次的检索命令是向前检索，那么此次检索的方向是向后；如果上次的检索命令是向后检索，那么此次检索的方向是向前。

## 移动

- `h`：向左移动光标。  
- `j`：向下移动光标。  
- `k`：向上移动光标。  
- `l`：向右移动光标。

**移动到第一行**  
第1种方法：输入:0或:1  回车  
第2钟方法：键盘按下小写的gg

**移动到最后一行**  
第1种方法：输入:$  回车  
第2种方法：键盘按下大写的G

# ps  

``` bash
ps [options]
```

以下是几个常用 `ps` 命令选项及其解释：

1. **-A, -e**：列出系统中的所有进程。
2. **-a**：显示终端上的所有进程，包括其他用户的进程。
3. **-u**：显示进程的详细信息，包括用户、CPU 使用率等。
4. **-x**：列出与终端无关的进程。
5. **-l**：显示长格式的输出，包括更多的进程信息。
6. **-p PID**：根据进程 ID (PID) 显示指定的进程。
7. **-C COMMAND**：根据命令名 (COMMAND) 显示与该命令相关的进程。
8. **-N**：显示与指定的格式不匹配的进程。
9. **-T**：显示当前终端下的所有进程。

``` bash
ps -ef
```

- `e`: 表示 "everyone"（所有人），这个选项会显示系统上所有用户的进程，而不仅仅是当前用户的进程。
- `f`: 表示 "full format"（完整格式），这个选项会以完整的格式显示进程信息，包括父进程 ID、启动时间、CPU 占用时间等。

``` bash
$ps -ef
UID PID PPID C STIME TTY TIME CMD
root 1 0 0 02:05 ? 00:00:01 init
```

UID：用户ID，表示运行该进程的用户。这里是root用户。  
PID：进程ID，是进程的唯一标识符。这里的PID是1。  
PPID：父进程ID，表示创建这个子进程的父进程编号。这里的PPID是0。  
C：CPU使用率，表示进程占用CPU的百分比。这里的C是0。  
STIME：进程启动时间，表示进程开始运行的时间。这里的STIME是02:05。  
TTY：终端类型，表示进程所在的终端。这里的TTY是?，表示该进程没有与终端关联。  
TIME：CPU时间，表示进程占用的CPU时间。这里的TIME是00:00:01，表示进程占用的CPU时间为1秒。  
CMD：命令名称，表示启动进程的命令。这里的CMD是init，表示这个进程是用来启动操作系统的。

# grep  

grep（Global Regular Expression Print 全局 正则表达是 打印）是 Linux/Unix 系统中强大的文本搜索工具，用于在文件中查找匹配指定模式的行

``` bash
grep [选项] 模式 [文件...]
```

grep -n "pattern" file.txt  

- -n 是选项
- "pattern" 是模式
- file.txt 是文件

过滤2种关键字

``` bash
grep -e "keyword1" -e "keyword2" file.txt
```

显示行号

``` bash
grep -n "keyword" file.txt
```

sed命令将file.txt文件的1000行到2000行输出到另一个文件中  

``` bash
sed -n '1000,2000p' file.txt > output.txt
```

常用**选项**表格

| 选项 | 缩写来源 | 描述 | 示例 |
|------|----------|------|------|
| **基础选项** | | | |
| `-i` | **ignore-case** | 忽略大小写 | `grep -i "error" file` |
| `-v` | **inVert** | 反向匹配，显示不包含的行 | `grep -v "^#" config` |
| `-w` | **word-regexp** | 整词匹配 | `grep -w "the" text` |
| `-x` | **line-regexp** | 整行匹配 | `grep -x "OK" results` |
| `-F` | **Fixed-strings** | 固定字符串（不解析正则） | `grep -F "a.b" file` |
| `-E` | **Extended-regexp** | 扩展正则表达式 | `grep -E "err\|warn" log` |
| `-P` | **Perl-regexp** | Perl兼容正则表达式 | `grep -P "\d+" data` |
| | | | |
| **输出控制** | | | |
| `-n` | **line-number** | 显示行号 | `grep -n "findme" file` |
| `-c` | **count** | 只显示匹配行数 | `grep -c "error" log` |
| `-l` | **files-with-matches** | 只显示文件名 | `grep -l "TODO" *.py` |
| `-L` | **files-without-match** | 显示不匹配的文件名 | `grep -L "pattern" *.txt` |
| `-o` | **only-matching** | 只显示匹配部分 | `grep -o "\d+" file` |
| `-q` | **quiet/silent** | 静默模式（用于脚本） | `grep -q "found" && echo "yes"` |
| `-s` | **no-messages** | 抑制错误消息 | `grep -s "text" *.log` |
| | | | |
| **上下文显示** | | | |
| `-A n` | **After-context** | 显示匹配行后n行 | `grep -A 2 "error" log` |
| `-B n` | **Before-context** | 显示匹配行前n行 | `grep -B 1 "ERROR" log` |
| `-C n` | **Context** | 显示匹配行前后各n行 | `grep -C 3 "warning"` |
| | | | |
| **文件处理** | | | |
| `-r` | **recursive** | 递归搜索目录 | `grep -r "func" ./src/` |
| `-R` | **dereference-recursive** | 递归（跟随符号链接） | `grep -R "text" /var/` |
| `--include` | | 包含特定文件模式 | `grep -r --include="*.c" "int" .` |
| `--exclude` | | 排除特定文件模式 | `grep -r --exclude="*.o" "test" .` |
| `--exclude-dir` | | 排除目录 | `grep -r --exclude-dir=".git" "TODO" .` |
| | | | |
| **颜色与格式** | | | |
| `--color=` | | 高亮匹配（auto/always/never） | `grep --color=auto "text"` |
| `-H` | **with-filename** | 总是显示文件名 | `grep -H "text" file` |
| `-h` | **no-filename** | 不显示文件名 | `grep -h "text" *.log` |
| | | | |
| **其他有用选项** | | | |
| `-e pattern` | **expression** | 指定多个模式 | `grep -e "err" -e "warn"` |
| `-f file` | **file** | 从文件读取模式 | `grep -f patterns.txt log` |
| `-a` | **text** | 将二进制文件当文本处理 | `grep -a "string" binary` |
| `-I` | | 忽略二进制文件 | `grep -I "text" *` |
| `-z` | **null-data** | 以NUL字符分隔数据 | `grep -z "pattern" file` |
| `-m num` | **max-count** | 最多匹配num行 | `grep -m 5 "error" log` |
| `-b` | **byte-offset** | 显示字节偏移量 | `grep -b "pattern" file` |
| `-T` | **initial-tab** | 对齐制表符（与-n一起用） | `grep -nT "text" file` |
